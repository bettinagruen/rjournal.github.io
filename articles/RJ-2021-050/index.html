<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

<style>
  div.csl-bib-body { }
  div.csl-entry {
    clear: both;
    }
  .hanging div.csl-entry {
    margin-left:2em;
    text-indent:-2em;
  }
  div.csl-left-margin {
    min-width:2em;
    float:left;
  }
  div.csl-right-inline {
    margin-left:2em;
    padding-left:1em;
  }
  div.csl-indent {
    margin-left: 2em;
  }
</style>

  <!--radix_placeholder_meta_tags-->
<title>The R Journal: Conversations in Time: Interactive Visualization to Explore Structured Temporal Data</title>

<meta property="description" itemprop="description" content="Temporal data often has a hierarchical structure, defined by categorical variables describing different levels, such as political regions or sales products. The nesting of categorical variables produces a hierarchical structure. The tsibbletalk package is developed to allow a user to interactively explore temporal data, relative to the nested or crossed structures. It can help to discover differences between category levels, and uncover interesting periodic or aperiodic slices. The package implements a shared `tsibble` object that allows for linked brushing between coordinated views, and a shiny module that aids in wrapping timelines for seasonal patterns. The tools are demonstrated using two data examples: domestic tourism in Australia and pedestrian traffic in Melbourne."/>

<link rel="canonical" href="https://doi.org/10.32614/RJ-2021-050/"/>
<link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
<link rel="icon" type="image/vnd.microsoft.icon" href="../../resources/favicon.ico"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-06-08"/>
<meta property="article:created" itemprop="dateCreated" content="2021-06-08"/>
<meta name="article:author" content="Earo Wang"/>
<meta name="article:author" content="Dianne Cook"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="The R Journal: Conversations in Time: Interactive Visualization to Explore Structured Temporal Data"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Temporal data often has a hierarchical structure, defined by categorical variables describing different levels, such as political regions or sales products. The nesting of categorical variables produces a hierarchical structure. The tsibbletalk package is developed to allow a user to interactively explore temporal data, relative to the nested or crossed structures. It can help to discover differences between category levels, and uncover interesting periodic or aperiodic slices. The package implements a shared `tsibble` object that allows for linked brushing between coordinated views, and a shiny module that aids in wrapping timelines for seasonal patterns. The tools are demonstrated using two data examples: domestic tourism in Australia and pedestrian traffic in Melbourne."/>
<meta property="og:url" content="https://doi.org/10.32614/RJ-2021-050/"/>
<meta property="og:image" content="https://journal.r-project.org/articles/RJ-2021-050/figure/highlight-retail-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="1152"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="The R Journal"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="The R Journal: Conversations in Time: Interactive Visualization to Explore Structured Temporal Data"/>
<meta property="twitter:description" content="Temporal data often has a hierarchical structure, defined by categorical variables describing different levels, such as political regions or sales products. The nesting of categorical variables produces a hierarchical structure. The tsibbletalk package is developed to allow a user to interactively explore temporal data, relative to the nested or crossed structures. It can help to discover differences between category levels, and uncover interesting periodic or aperiodic slices. The package implements a shared `tsibble` object that allows for linked brushing between coordinated views, and a shiny module that aids in wrapping timelines for seasonal patterns. The tools are demonstrated using two data examples: domestic tourism in Australia and pedestrian traffic in Melbourne."/>
<meta property="twitter:url" content="https://doi.org/10.32614/RJ-2021-050/"/>
<meta property="twitter:image" content="https://journal.r-project.org/articles/RJ-2021-050/figure/highlight-retail-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="1152"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="The R Journal: Conversations in Time: Interactive Visualization to Explore Structured Temporal Data"/>
<meta name="citation_fulltext_html_url" content="https://doi.org/10.32614/RJ-2021-050"/>
<meta name="citation_pdf_url" content="RJ-2021-050.pdf"/>
<meta name="citation_volume" content="13"/>
<meta name="citation_issue" content="1"/>
<meta name="citation_doi" content="10.32614/RJ-2021-050"/>
<meta name="citation_journal_title" content="The R Journal"/>
<meta name="citation_issn" content="2073-4859"/>
<meta name="citation_firstpage" content="461"/>
<meta name="citation_lastpage" content="469"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2021/06/08"/>
<meta name="citation_publication_date" content="2021/06/08"/>
<meta name="citation_author" content="Earo Wang"/>
<meta name="citation_author_institution" content="The University of Auckland"/>
<meta name="citation_author" content="Dianne Cook"/>
<meta name="citation_author_institution" content="Monash University"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Tidy data;citation_publisher=Foundation for Open Access Statistics;citation_volume=59;citation_author=Hadley Wickham"/>
  <meta name="citation_reference" content="citation_title=A new tidy data structure to support exploration and modeling of temporal data;citation_publisher=Taylor &amp; Francis;citation_volume=29;citation_doi=10.1080/10618600.2019.1695624;citation_author=Earo Wang;citation_author=Dianne Cook;citation_author=Rob J Hyndman"/>
  <meta name="citation_reference" content="citation_title=Welcome to the tidyverse;citation_publisher=The Open Journal;citation_volume=4;citation_author=Hadley Wickham;citation_author=Mara Averick;citation_author=Jennifer Bryan;citation_author=Winston Chang;citation_author=Lucy D’Agostino McGowan;citation_author=Romain François;citation_author=Garrett Grolemund;citation_author=Alex Hayes;citation_author=Lionel Henry;citation_author=Jim Hester;citation_author=Max Kuhn;citation_author=Thomas Lin Pedersen;citation_author=Evan Miller;citation_author=Stephan Milton Bache;citation_author=Kirill Müller;citation_author=Jeroen Ooms;citation_author=David Robinson;citation_author=Dana Paige Seidel;citation_author=Vitalie Spinu;citation_author=Kohske Takahashi;citation_author=Davis Vaughan;citation_author=Claus Wilke;citation_author=Kara Woo;citation_author=Hiroaki Yutani"/>
  <meta name="citation_reference" content="citation_title=Forecasting: Principles and practice;citation_publisher=OTexts;citation_author=Rob J Hyndman;citation_author=George Athanasopoulos"/>
  <meta name="citation_reference" content="citation_title=Symbolic description of factorial models for analysis of variance;citation_publisher=[Wiley, Royal Statistical Society];citation_volume=22;citation_issn=00359254, 14679876;citation_author=G. N. Wilkinson;citation_author=C. E. Rogers"/>
  <meta name="citation_reference" content="citation_title=Reactive programming for interactive graphics;citation_volume=29;citation_issn=0883-4237;citation_author=Yihui Xie;citation_author=Heike Hofmann;citation_author=Xiaoyue Cheng"/>
  <meta name="citation_reference" content="citation_title=Enabling interactivity on displays of multivariate time series and longitudinal data;citation_volume=25;citation_issn=1061-8600, 1537-2715;citation_author=Xiaoyue Cheng;citation_author=Dianne Cook;citation_author=Heike Hofmann"/>
  <meta name="citation_reference" content="citation_title=Pedestrian volume in melbourne;citation_publisher=City of Melbourne, Australia;citation_author=Pedestrian volume in melbourne"/>
  <meta name="citation_reference" content="citation_title=Australian domestic overnight trips;citation_publisher=Tourism Research Australia, Australia;citation_author=Australian domestic overnight trips"/>
  <meta name="citation_reference" content="citation_title=Ensemble Graphics;citation_volume=27;citation_issn=1061-8600, 1537-2715;citation_author=Antony Unwin;citation_author=Pedro Valero-Mora"/>
  <meta name="citation_reference" content="citation_title=Crosstalk: Inter-widget interactivity for HTML widgets;citation_author=Joe Cheng"/>
  <meta name="citation_reference" content="citation_title=Fable: Forecasting models for tidy time series;citation_author=Mitchell O’Hara-Wild;citation_author=Rob Hyndman;citation_author=Earo Wang"/>
  <meta name="citation_reference" content="citation_title=Feasts: Feature extraction and statistics for time series;citation_author=Mitchell O’Hara-Wild;citation_author=Rob Hyndman;citation_author=Earo Wang"/>
  <meta name="citation_reference" content="citation_title=Htmlwidgets: HTML widgets for r;citation_author=Ramnath Vaidyanathan;citation_author=Yihui Xie;citation_author=JJ Allaire;citation_author=Joe Cheng;citation_author=Kenton Russell"/>
  <meta name="citation_reference" content="citation_title=Leaflet: Create interactive web maps with the JavaScript ’leaflet’ library;citation_author=Joe Cheng;citation_author=Bhaskar Karambelkar;citation_author=Yihui Xie"/>
  <meta name="citation_reference" content="citation_title=Loon: Interactive statistical data visualization;citation_author=Adrian Waddell;citation_author=R. Wayne Oldford"/>
  <meta name="citation_reference" content="citation_title=Rbokeh: R interface for bokeh;citation_author=Ryan Hafen;citation_author=Rbokeh: R interface for bokeh"/>
  <meta name="citation_reference" content="citation_title=Shiny: Web application framework for r;citation_author=Winston Chang;citation_author=Joe Cheng;citation_author=JJ Allaire;citation_author=Yihui Xie;citation_author=Jonathan McPherson"/>
  <meta name="citation_reference" content="citation_title=Tsibbledata: Diverse datasets for ’tsibble’;citation_author=Mitchell O’Hara-Wild;citation_author=Rob Hyndman;citation_author=Earo Wang"/>
  <meta name="citation_reference" content="citation_title=Interactive web-based data visualization with r, plotly, and shiny;citation_publisher=Chapman; Hall/CRC;citation_author=Carson Sievert"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","author","bibliography","description","preamble","output","date","date_received","volume","issue","slug","journal","draft","pdf_url","citation_url","doi","creative_commons","packages","CTV","csl","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Conversations in Time: Interactive Visualization to Explore Structured Temporal Data"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","address","email"]}},"value":[{"type":"character","attributes":{},"value":["Earo Wang"]},{"type":"character","attributes":{},"value":["The University of Auckland"]},{"type":"character","attributes":{},"value":["Department of Statistics"]},{"type":"character","attributes":{},"value":["earo.wang@auckland.ac.nz"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","address","email"]}},"value":[{"type":"character","attributes":{},"value":["Dianne Cook"]},{"type":"character","attributes":{},"value":["Monash University"]},{"type":"character","attributes":{},"value":["Department of Econometrics and Business Statistics"]},{"type":"character","attributes":{},"value":["dicook@monash.edu"]}]}]},{"type":"character","attributes":{},"value":["tsibbletalk.bib"]},{"type":"character","attributes":{},"value":["Temporal data often has a hierarchical structure, defined by categorical variables describing different levels, such as political regions or sales products. The nesting of categorical variables produces a hierarchical structure. The tsibbletalk package is developed to allow a user to interactively explore temporal data, relative to the nested or crossed structures. It can help to discover differences between category levels, and uncover interesting periodic or aperiodic slices. The package implements a shared `tsibble` object that allows for linked brushing between coordinated views, and a shiny module that aids in wrapping timelines for seasonal patterns. The tools are demonstrated using two data examples: domestic tourism in Australia and pedestrian traffic in Melbourne."]},{"type":"character","attributes":{},"value":["\\usepackage{subfig}\n"]},{"type":"character","attributes":{},"value":["rjtools::rjournal_web_article"]},{"type":"character","attributes":{},"value":["2021-06-08"]},{"type":"character","attributes":{},"value":["2020-10-30"]},{"type":"integer","attributes":{},"value":[13]},{"type":"integer","attributes":{},"value":[1]},{"type":"character","attributes":{},"value":["RJ-2021-050"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","issn","firstpage","lastpage"]}},"value":[{"type":"character","attributes":{},"value":["The R Journal"]},{"type":"character","attributes":{},"value":["2073-4859"]},{"type":"integer","attributes":{},"value":[461]},{"type":"integer","attributes":{},"value":[469]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["RJ-2021-050.pdf"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2021-050"]},{"type":"character","attributes":{},"value":["10.32614/RJ-2021-050"]},{"type":"character","attributes":{},"value":["CC BY"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["cran","bioc"]}},"value":[{"type":"character","attributes":{},"value":["tsibbletalk","tsibble","tsibbledata","tidyverse","feasts","fable","shiny","htmlwidgets","plotly","rbokeh","leaflet","crosstalk","grDevices","loon","ggplot2"]},{"type":"list","attributes":{},"value":[]}]},{"type":"character","attributes":{},"value":["MissingData","Spatial","TeachingStatistics","TimeSeries","WebTechnologies"]},{"type":"character","attributes":{},"value":["/home/mitchell/R/x86_64-pc-linux-gnu-library/4.1/rjtools/rjournal.csl"]},{"type":"character","attributes":{},"value":["https://doi.org/10.32614/RJ-2021-050/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["cache/__packages","cache/highlight-retail_060f7bf7386bd15f62f7d02d29f84eeb.RData","cache/highlight-retail_060f7bf7386bd15f62f7d02d29f84eeb.rdb","cache/highlight-retail_060f7bf7386bd15f62f7d02d29f84eeb.rdx","cache/load-ped_8dfee0a0db7d7777aca082e456581a15.RData","cache/load-ped_8dfee0a0db7d7777aca082e456581a15.rdb","cache/load-ped_8dfee0a0db7d7777aca082e456581a15.rdx","cache/load-pkgs_81262599e35d16f37eaad05ba69275ce.RData","cache/load-pkgs_81262599e35d16f37eaad05ba69275ce.rdb","cache/load-pkgs_81262599e35d16f37eaad05ba69275ce.rdx","cache/ped-slice_6a0f0de09184930d87b1d44c20bea95e.RData","cache/ped-slice_6a0f0de09184930d87b1d44c20bea95e.rdb","cache/ped-slice_6a0f0de09184930d87b1d44c20bea95e.rdx","cache/pkg-bib_f700086301fbfb1bb1cbdbb360373964.RData","cache/pkg-bib_f700086301fbfb1bb1cbdbb360373964.rdb","cache/pkg-bib_f700086301fbfb1bb1cbdbb360373964.rdx","cache/plotly-key-tree_18096bfc8c8515962facfae9738913e7.RData","cache/plotly-key-tree_18096bfc8c8515962facfae9738913e7.rdb","cache/plotly-key-tree_18096bfc8c8515962facfae9738913e7.rdx","cache/print-retail_536e7eb05f2987fe096d96b7dfe78653.RData","cache/print-retail_536e7eb05f2987fe096d96b7dfe78653.rdb","cache/print-retail_536e7eb05f2987fe096d96b7dfe78653.rdx","cache/tourism-linking-fig_2be8cb3bf17f0c791f42d847f902ac1f.RData","cache/tourism-linking-fig_2be8cb3bf17f0c791f42d847f902ac1f.rdb","cache/tourism-linking-fig_2be8cb3bf17f0c791f42d847f902ac1f.rdx","cache/tourism-multi_2dae1beab3b16a87583e2e7ee0351d92.RData","cache/tourism-multi_2dae1beab3b16a87583e2e7ee0351d92.rdb","cache/tourism-multi_2dae1beab3b16a87583e2e7ee0351d92.rdx","cache/tourism-scatter_60b720867ffb6df1dfbb409e85506cac.RData","cache/tourism-scatter_60b720867ffb6df1dfbb409e85506cac.rdb","cache/tourism-scatter_60b720867ffb6df1dfbb409e85506cac.rdx","cache/tourism-series_ef9f2626d23e5f65abcdfc431dc598a7.RData","cache/tourism-series_ef9f2626d23e5f65abcdfc431dc598a7.rdb","cache/tourism-series_ef9f2626d23e5f65abcdfc431dc598a7.rdx","cache/tourism-shared_b87dd9037019105c4416da29db9dedde.RData","cache/tourism-shared_b87dd9037019105c4416da29db9dedde.rdb","cache/tourism-shared_b87dd9037019105c4416da29db9dedde.rdx","cache/wrap-ped_13fdff52761b3444f88bd1c414c6b699.RData","cache/wrap-ped_13fdff52761b3444f88bd1c414c6b699.rdb","cache/wrap-ped_13fdff52761b3444f88bd1c414c6b699.rdx","figure/highlight-retail-1.pdf","figure/highlight-retail-1.png","figure/highlight-retail-2.pdf","figure/highlight-retail-2.png","img/tourism-linking.png","img/wrap-0.png","img/wrap-1.png","img/wrap-7.png","preamble.tex","response.pdf","RJ-2021-050.log","RJ-2021-050.pdf","RJ-2021-050.tex","RJ-2021-050.zip","RJwrapper.log","RJwrapper.tex","Rlogo.pdf","rpkgs.bib","scripts/demo.R","scripts/pedestrian.R","scripts/tourism.R","tsibbletalk.bib","tsibbletalk.tex"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.7);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(0, 0, 0, 0.8);
  --text-size:        15px;
  --hover-color:      black;
  --bkgd-color:       #ffffff;
}

.distill-site-footer {
  --text-color:       rgba(0, 0, 0, 0.8);
  --text-size:        15px;
  --hover-color:      black;
  --bkgd-color:       #fafafa;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

.nav-right > a {
  text-transform: uppercase;
}

d-title h1, d-title p, d-title figure,
d-abstract p, d-abstract b {
  grid-column: page;
}

.rj-blue {
  color: #2467bb;
}

ul li {
  line-height: 1.6;
  margin-top: 0em;
  margin-bottom: 0em;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.16/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->
  <script>
    $(function() {
      console.log("Starting...")

      // Always show Published - distill hides it if not set
      function show_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'visible');
      }

      show_byline_column('Published')

      // tweak function
      var rmd_meta = JSON.parse($("#radix-rmarkdown-metadata").html());
      function get_meta(name, meta) {
        var ind = meta.attributes.names.value.findIndex((e) => e == name)
        var val = meta.value[ind]
        if (val.type != 'list') {
          return val.value.toString()
        }
        return val
      }

      // tweak description
      // Add clickable tags
      const slug = get_meta('slug', rmd_meta)
      const doi = get_meta('doi', rmd_meta)

      var title = $("d-title").text

      const buttons = $('<div class="dt-tags" style="grid-column: page;">')
      buttons.append('<a href="#citation" class="dt-tag"><i class="fas fa-quote-left"></i> Cite</a>')
      buttons.append('<a href="' + slug + '.pdf" class="dt-tag"><i class="fas fa-file-pdf"></i> PDF</a>')
      buttons.append('<a href="https://twitter.com/intent/tweet?text='+title+'&url=https%3A%2F%2Fdoi.org%2F' + doi + '" class="dt-tag"><i class="fab fa-twitter"></i> Tweet</a>')

      const abstract = $('<d-abstract>')
      abstract.append('<b>Abstract:</b><br>')
      abstract.append($("d-title p:not(:empty)").first()) // Move description to d-abstract
      $("d-title p:empty").remove() // Remove empty paragraphs after title
      abstract.append(buttons)
      abstract.insertAfter($('d-title')) // Add abstract section after title

      // tweak by-line
      var byline = $("d-byline div.byline")
      ind = rmd_meta.attributes.names.value.findIndex((e) => e == "journal")
      const journal = get_meta('journal', rmd_meta)
      const volume = get_meta('volume', rmd_meta)
      const issue = get_meta('issue', rmd_meta)
      const jrtitle = get_meta('title', journal)
      const year = ((jrtitle == "R News") ? 2000 : 2008) + parseInt(volume)
      const firstpage = get_meta('firstpage', journal)
      const lastpage = get_meta('lastpage', journal)
      byline.append('<div class="rjournal grid">')
      $('div.rjournal').append('<h3>Volume</h3>')
      $('div.rjournal').append('<h3>Pages</h3>')
      $('div.rjournal').append('<a class="volume" href="../../issues/'+year+'-'+issue+'">'+volume+'/'+issue+'</a>')
      $('div.rjournal').append('<p class="pages">'+firstpage+' - '+lastpage+'</p>')

      const received_date = new Date(get_meta('date_received', rmd_meta))
      byline.find('h3:contains("Published")').parent().append('<h3>Received</h3><p>'+received_date.toLocaleDateString('en-US', {month: 'short'})+' '+received_date.getDate()+', '+received_date.getFullYear()+'</p>')

    })
  </script>

  <style>
      /*
    .nav-dropdown-content .nav-dropdown-header {
      text-transform: lowercase;
    }
    */

    d-byline .byline {
      grid-template-columns: 2fr 2fr 2fr 2fr;
    }

    d-byline .rjournal {
      grid-column-end: span 2;
      grid-template-columns: 1fr 1fr;
      margin-bottom: 0;
    }

    d-title h1, d-title p, d-title figure,
    d-abstract p, d-abstract b {
      grid-column: page;
    }

    d-title .dt-tags {
      grid-column: page;
    }

    .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    d-article h1 {
      line-height: 1.1em;
    }

    d-abstract p, d-article p {
      text-align: justify;
    }

    @media(min-width: 1000px) {
      .d-contents.d-contents-float {
        justify-self: end;
      }

      nav.toc {
        border-right: 1px solid rgba(0, 0, 0, 0.1);
        border-right-width: 1px;
        border-right-style: solid;
        border-right-color: rgba(0, 0, 0, 0.1);
      }
    }

    .posts-list .dt-tags .dt-tag {
      text-transform: lowercase;
    }

    @keyframes highlight-target {
      0% {
        background-color: #ffa;
      }
      66% {
        background-color: #ffa;
      }
      100% {
        background-color: none;
      }
    }

    d-article :target, d-appendix :target {
       animation: highlight-target 3s;
    }
  </style>


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Conversations in Time: Interactive Visualization to Explore Structured Temporal Data","description":"Temporal data often has a hierarchical structure, defined by categorical variables describing different levels, such as political regions or sales products. The nesting of categorical variables produces a hierarchical structure. The tsibbletalk package is developed to allow a user to interactively explore temporal data, relative to the nested or crossed structures. It can help to discover differences between category levels, and uncover interesting periodic or aperiodic slices. The package implements a shared `tsibble` object that allows for linked brushing between coordinated views, and a shiny module that aids in wrapping timelines for seasonal patterns. The tools are demonstrated using two data examples: domestic tourism in Australia and pedestrian traffic in Melbourne.","doi":"10.32614/RJ-2021-050","authors":[{"author":"Earo Wang","authorURL":"#","affiliation":"The University of Auckland","affiliationURL":"#","orcidID":""},{"author":"Dianne Cook","authorURL":"#","affiliation":"Monash University","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-06-08T00:00:00.000+10:00","citationText":"Wang & Cook, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="../../index.html">
<img src="../../resources/rlogo.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">The R Journal</a>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../issues.html">Issues</a>
<a href="../../news.html">News</a>
<a href="../../issues/2022-1">Current</a>
<a href="../../submissions.html">Submit</a>
<a href="../../articles.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Conversations in Time: Interactive Visualization to Explore Structured Temporal Data</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Temporal data often has a hierarchical structure, defined by categorical variables describing different levels, such as political regions or sales products. The nesting of categorical variables produces a hierarchical structure. The tsibbletalk package is developed to allow a user to interactively explore temporal data, relative to the nested or crossed structures. It can help to discover differences between category levels, and uncover interesting periodic or aperiodic slices. The package implements a shared <code>tsibble</code> object that allows for linked brushing between coordinated views, and a shiny module that aids in wrapping timelines for seasonal patterns. The tools are demonstrated using two data examples: domestic tourism in Australia and pedestrian traffic in Melbourne.</p></p>
</div>

<div class="d-byline">
  Earo Wang  (The University of Auckland)
  
,   Dianne Cook  (Monash University)
  
<br/>2021-06-08
</div>

<div class="d-article">
<div class="layout-chunk" data-layout="l-body">

</div>
<h1 id="introduction">Introduction</h1>
<p>Temporal data typically arrives as a set of many observational units measured over time. Some variables may be categorical, containing a hierarchy in the collection process, that may be measurements taken in different geographic regions, or types of products sold by one company. Exploring these multiple features can be daunting. Ensemble graphics <span class="citation" data-cites="unwin_ensemble_2018">(<a href="#ref-unwin_ensemble_2018" role="doc-biblioref">Unwin and Valero-Mora 2018</a>)</span> bundle multiple views of a data set together into one composite figure. These provide an effective approach for exploring and digesting many different aspects of temporal data. Adding interactivity to the ensemble can greatly enhance the exploration process.</p>
<p>This paper describes new software, the <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> package, for exploring temporal data using linked views and time wrapping. We first provide some background to the approach based on setting up data structures and workflow, and give an overview of interactive systems in R. The section following introduces the <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> package. We explain the mechanism for constructing interactivity, to link between multiple hierarchical data objects and hence plots, and describe the set up for interactively slicing and dicing time to wrap a series on itself to investigate periodicities.</p>
<h1 id="background-tidy-temporal-data-and-workflow">Background: tidy temporal data and workflow</h1>
<p>The <a href="https://cran.r-project.org/package=tsibble">tsibble</a> package <span class="citation" data-cites="wang2020tsibble">(<a href="#ref-wang2020tsibble" role="doc-biblioref">Wang et al. 2020</a>)</span> introduced a unified temporal data structure, referred to as a <code>tsibble</code>, to represent time series and longitudinal data in a tidy format <span class="citation" data-cites="wickham2014tidy">(<a href="#ref-wickham2014tidy" role="doc-biblioref">Wickham 2014</a>)</span>. A <code>tsibble</code> extends the <code>data.frame</code> and <code>tibble</code> classes with the temporal contextual metadata: <code>index</code> and <code>key</code>. The <code>index</code> declares a data column that holds time-related indices. The <code>key</code> identifies a collection of related series or panels observed over the <code>index</code>-defined period, which can comprise multiple columns. An example of a <code>tsibble</code> can be found in the monthly Australian retail trade turnover data (<code>aus_retail</code>), available in the <a href="https://cran.r-project.org/package=tsibbledata">tsibbledata</a> package <span class="citation" data-cites="R-tsibbledata">(<a href="#ref-R-tsibbledata" role="doc-biblioref">O’Hara-Wild et al. 2020c</a>)</span>, shown below. The <code>Month</code> column holds year-months as the <code>index</code>. <code>State</code> and <code>Industry</code> are the identifiers for these 152 series, which form the <code>key</code>. Note that the column <code>Series ID</code> could be an alternative option for setting up the <code>key</code>, but <code>State</code> and <code>Industry</code> are more readable and informative. The <code>index</code> and <code>key</code> are “sticky” columns to a <code>tsibble</code>, forming critical pieces for fluent downstream temporal data analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>#&gt; # A tsibble: 64,532 x 5 [1M]
#&gt; # Key:       State, Industry [152]
#&gt;   State                        Industry       Serie…¹    Month Turno…²
#&gt;   &lt;chr&gt;                        &lt;chr&gt;          &lt;chr&gt;      &lt;mth&gt;   &lt;dbl&gt;
#&gt; 1 Australian Capital Territory Cafes, restau… A33498… 1982 Apr     4.4
#&gt; 2 Australian Capital Territory Cafes, restau… A33498… 1982 May     3.4
#&gt; 3 Australian Capital Territory Cafes, restau… A33498… 1982 Jun     3.6
#&gt; 4 Australian Capital Territory Cafes, restau… A33498… 1982 Jul     4  
#&gt; 5 Australian Capital Territory Cafes, restau… A33498… 1982 Aug     3.6
#&gt; # … with 64,527 more rows, and abbreviated variable names
#&gt; #   ¹​`Series ID`, ²​Turnover</code></pre>
</div>
<p>In the spirit of tidy data from the <a href="https://cran.r-project.org/package=tidyverse">tidyverse</a> <span class="citation" data-cites="Wickham2019">(<a href="#ref-Wickham2019" role="doc-biblioref">Wickham et al. 2019</a>)</span>, the <strong>tidyverts</strong> suite features <code>tsibble</code> as the foundational data structure, and helps to build a fluid and fluent pipeline for time series analysis. Besides <a href="https://cran.r-project.org/package=tsibble">tsibble</a>, the <a href="https://cran.r-project.org/package=feasts">feasts</a> <span class="citation" data-cites="R-feasts">(<a href="#ref-R-feasts" role="doc-biblioref">O’Hara-Wild et al. 2020b</a>)</span> and <a href="https://cran.r-project.org/package=fable">fable</a> <span class="citation" data-cites="R-fable">(<a href="#ref-R-fable" role="doc-biblioref">O’Hara-Wild et al. 2020a</a>)</span> packages fill the role of statistical analysis and forecasting in the <strong>tidyverts</strong> ecosystem. During all the steps of a time series analysis, the series of interest, denoted by the <code>key</code> variable, typically persist, through the trend modeling and also forecasting. We would typically want to examine the series across all of the keys.</p>
<p>Figure <a href="#fig:highlight-retail">1</a> illustrates examining temporal data with many keys. The data has 152 series corresponding to different industries in retail data. The multiple series are displayed using an overlaid time series plot, along with a scatterplot of two variables (trend versus seasonal strength) from feature space, where each series is represented by a dot. The feature space is computed using the <code>features()</code> function from <a href="https://cran.r-project.org/package=feasts">feasts</a>, which summarises the original data for each series using various statistical features. This function along with other <strong>tidyverts</strong> functions is <code>tsibble</code>-aware, and outputs a table in a reduced form where each row corresponds to a series, which can be graphically displayed as in Figure <a href="#fig:highlight-retail-2"><strong>??</strong></a>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:highlight-retail"></span>
<img src="figure/highlight-retail-1.png" alt="Plots for the \code{aus\_retail} data, with the series of strongest seasonal strength highlighted. (a) An overlaid time series plot. (b) A scatter plot drawn from their time series features, where each dot represents a time series from (a)." width=".49\linewidth" /><img src="figure/highlight-retail-2.png" alt="Plots for the \code{aus\_retail} data, with the series of strongest seasonal strength highlighted. (a) An overlaid time series plot. (b) A scatter plot drawn from their time series features, where each dot represents a time series from (a)." width=".49\linewidth" />
<p class="caption">
Figure 1: Plots for the data, with the series of strongest seasonal strength highlighted. (a) An overlaid time series plot. (b) A scatter plot drawn from their time series features, where each dot represents a time series from (a).
</p>
</div>
</div>
<p>Figure <a href="#fig:highlight-retail">1</a> has also been highlighted to focus on the one series with the strongest seasonality. To create this highlighting, one needs to first filter the interesting series from the features table, and join back to the original <code>tsibble</code> in order to examine its trend in relation to others. This procedure can soon grow cumbersome if many series are to be explored. It illustrates a need to query interesting series on the fly. Although these two plots are static, we can consider them as linked views because the common <code>key</code> variables link between the two data tables producing the two plots. This motivates the work in this package, described in this paper, to enable interactivity of <code>tsibble</code> and <code>tsibble</code>-derived objects for rapid exploratory data analysis.</p>
<h1 id="overview-of-interactivity">Overview of interactivity</h1>
<p>There is a long history of interactive data visualization research and corresponding systems. Within R, the systems can be roughly divided into systems utilizing web technology and those that do not.</p>
<p>R <a href="https://cran.r-project.org/package=shiny">shiny</a> <span class="citation" data-cites="R-shiny">(<a href="#ref-R-shiny" role="doc-biblioref">Chang et al. 2020</a>)</span> and <a href="https://cran.r-project.org/package=htmlwidgets">htmlwidgets</a> <span class="citation" data-cites="R-htmlwidgets">(<a href="#ref-R-htmlwidgets" role="doc-biblioref">Vaidyanathan et al. 2019</a>)</span> provide infrastructure connecting R with HTML elements and JavaScript that support the interactivity. The <a href="https://cran.r-project.org/package=htmlwidgets">htmlwidgets</a> package makes it possible to embed JavaScript libraries into R so that users are able to write only R code to generate web-based plots. Many JavaScript charting libraries have been ported to R as HTML widgets, including <a href="https://cran.r-project.org/package=plotly">plotly</a> <span class="citation" data-cites="plotly2020">(<a href="#ref-plotly2020" role="doc-biblioref">Sievert 2020</a>)</span>, <a href="https://cran.r-project.org/package=rbokeh">rbokeh</a> <span class="citation" data-cites="R-rbokeh">(<a href="#ref-R-rbokeh" role="doc-biblioref">Hafen and Continuum Analytics, Inc. 2020</a>)</span>, and <a href="https://cran.r-project.org/package=leaflet">leaflet</a> <span class="citation" data-cites="R-leaflet">(<a href="#ref-R-leaflet" role="doc-biblioref">Cheng et al. 2019</a>)</span> for maps. Interactions between different widgets can be achieved with <a href="https://cran.r-project.org/package=shiny">shiny</a> or <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a> <span class="citation" data-cites="R-crosstalk">(<a href="#ref-R-crosstalk" role="doc-biblioref">Cheng 2020</a>)</span>. The <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a> extends <a href="https://cran.r-project.org/package=htmlwidgets">htmlwidgets</a> with shared R6 instances to support linked brushing and filtering across widgets, without relying on <a href="https://cran.r-project.org/package=shiny">shiny</a>.</p>
<p>Systems without the web technology include <a href="https://cran.r-project.org/package=grDevices">grDevices</a>, <a href="https://cran.r-project.org/package=loon">loon</a> <span class="citation" data-cites="R-loon">(<a href="#ref-R-loon" role="doc-biblioref">Waddell and Oldford 2020</a>)</span>, based on Tcl/Tk, and <a href="#">cranvas</a> <span class="citation" data-cites="xie_reactive_2014">(<a href="#ref-xie_reactive_2014" role="doc-biblioref">Xie et al. 2014</a>)</span> based on Qt. They offer a wide array of pre-defined interactions, such as selecting and zooming, to manipulate plots via mouse action, keyboard strokes, and menus. The <a href="#">cranvastime</a> package <span class="citation" data-cites="cheng_enabling_2016">(<a href="#ref-cheng_enabling_2016" role="doc-biblioref">Cheng et al. 2016</a>)</span> is an add-on to <a href="#">cranvas</a>, which provides specialized interactions for temporal data, such as wrapping and mirroring.</p>
<p>The techniques implemented in the work described in this paper utilize web technology, including <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a>, <a href="https://cran.r-project.org/package=plotly">plotly</a>, and R <a href="https://cran.r-project.org/package=shiny">shiny</a>.</p>
<h1 id="using-a-shared-temporal-data-object-for-interactivity">Using a shared temporal data object for interactivity</h1>
<p>The <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> package introduces a shared tsibble instance built on a <code>tsibble</code>. This allows for seamless communication between different plots of temporal data. The <code>as_shared_tsibble()</code> function turns a <code>tsibble</code> into a shared instance, <code>SharedTsibbleData</code>, which is a subclass of <code>SharedData</code> from <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a>. This is an R6 object driving data transmission across multiple views, due to its mutable and lightweight properties. The <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> package aims to streamline interactive exploration of temporal data, with the focus of temporal elements and structured linking.</p>
<h2 id="linking-between-plots">Linking between plots</h2>
<p>As opposed to one-to-one linking, <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> defaults to categorical variable linking, where selecting one or more observations in one category will broadcast to all other observations in this category. That is, linking is by key variables: within the time series plot, click on any data point, and the whole line will be highlighted in response. The <code>as_shared_tsibble()</code> uses <code>tsibble</code>’s <code>key</code> variables to achieve these types of linking.</p>
<p>The approach can also accommodate temporal data of nesting and crossing structures. These time series are referred to as hierarchical and grouped time series in the literature <span class="citation" data-cites="fpp">(<a href="#ref-fpp" role="doc-biblioref">Hyndman and Athanasopoulos 2017</a>)</span>. The <code>aus_retail</code> above is an example of grouped time series. Each series in the data corresponds to all possible combinations of the <code>State</code> and <code>Industry</code> variables, which means they are intrinsically crossed with each other. When one key variable is nested within another, such as regional areas within a state, this is considered to be a hierarchical structure.</p>
<p>The <code>spec</code> argument in <code>as_shared_tsibble()</code> provides a means to construct hybrid linking, that incorporates hierarchical and categorical linking. A symbolic formula can be passed to the <code>spec</code> argument, to define the crossing and/or nesting relationships among the key variables. Adopting <span class="citation" data-cites="Wilkinson1973">Wilkinson and Rogers (<a href="#ref-Wilkinson1973" role="doc-biblioref">1973</a>)</span>’s notation for factorial models, the <code>spec</code> follows the <code>/</code> and <code>*</code> operator conventions to declare nesting and crossing variables, respectively. The <code>spec</code> for the <code>aus_retail</code> data is therefore specified as <code>State * Industry</code> or <code>Industry * State</code>, which is the default for the presence of multiple <code>key</code> variables. If there is a hierarchy in the data, using <code>/</code> is required to indicate the parent-child relation, for a strictly one directional <code>parent/child</code>.</p>
<p>To illustrate nesting and crossing we use the <code>tourism_monthly</code> dataset <span class="citation" data-cites="tourism">(<a href="#ref-tourism" role="doc-biblioref">Tourism Research Australia 2020</a>)</span> packaged in <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a>. It contains monthly domestic overnight trips across Australia. The <code>key</code> is comprised of three identifying variables: <code>State</code>, <code>Region</code>, and <code>Purpose</code> (of the trip), in particular <code>State</code> nesting of <code>Region</code>, crossed together with <code>Purpose</code>. This specification can be translated as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tsibble.tidyverts.org'>tsibble</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>tsibbletalk</span><span class='op'>)</span></span>
<span><span class='va'>tourism_shared</span> <span class='op'>&lt;-</span> <span class='va'>tourism_monthly</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/tsibbletalk/man/as_shared_tsibble.html'>as_shared_tsibble</a></span><span class='op'>(</span>spec <span class='op'>=</span> <span class='op'>(</span><span class='va'>State</span> <span class='op'>/</span> <span class='va'>Region</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>Purpose</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:tourism-linking-fig"></span>
<img src="img/tourism-linking.png" alt="Snapshot of exploring an ensemble of linked plots of the Australian tourism data, built on a \code{tourism\_shared} object. It also illustrates persistent linked brushing to compare two groups." width="100%" />
<p class="caption">
Figure 2: Snapshot of exploring an ensemble of linked plots of the Australian tourism data, built on a object. It also illustrates persistent linked brushing to compare two groups.
</p>
</div>
</div>
<p>There is a three-level hierarchy: the root node is implicitly Australia, geographically disaggregated to states, and lower-level tourism regions. A new handy function <code>plotly_key_tree()</code> has been implemented to help explore the hierarchy. It interprets hierarchies in the shared tsibble’s <code>spec</code> as a tree view, built with <a href="https://cran.r-project.org/package=plotly">plotly</a>. The following code line produces the linked tree diagram (left panel of Figure <a href="#fig:tourism-linking-fig">2</a>). The visual for the tree hierarchy detangles a group of related series and provides a bird’s eye view of the data organization.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>p_l</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/tsibbletalk/man/plotly_key_tree.html'>plotly_key_tree</a></span><span class='op'>(</span><span class='va'>tourism_shared</span>, height <span class='op'>=</span> <span class='fl'>1100</span>, width <span class='op'>=</span> <span class='fl'>800</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The tree plot provides the graphics skeleton, upon which the rest of the data plots can be attached. In this example, small multiples of line plots are placed at the top right of Figure <a href="#fig:tourism-linking-fig">2</a> to explore the temporal trend across regions by the trip purpose. The shared tsibble data can be directly piped into <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a> code to create this.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span></span>
<span><span class='va'>p_tr</span> <span class='op'>&lt;-</span> <span class='va'>tourism_shared</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Month</span>, y <span class='op'>=</span> <span class='va'>Trips</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>group <span class='op'>=</span> <span class='va'>Region</span><span class='op'>)</span>, alpha <span class='op'>=</span> <span class='fl'>.5</span>, size <span class='op'>=</span> <span class='fl'>.4</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>Purpose</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://tsibble.tidyverts.org/reference/tsibble-scales.html'>scale_x_yearmonth</a></span><span class='op'>(</span>date_breaks <span class='op'>=</span> <span class='st'>"5 years"</span>, date_labels <span class='op'>=</span> <span class='st'>"%Y"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>These line plots are heavily overplotted. To tease apart structure in the multiple time series, the <code>features()</code> function computes interesting characteristics, including the measures of trend and seasonality. These are displayed in the scatterplot at the bottom right, where one dot represents one series.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://feasts.tidyverts.org/'>feasts</a></span><span class='op'>)</span></span>
<span><span class='va'>tourism_feat</span> <span class='op'>&lt;-</span> <span class='va'>tourism_shared</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://fabletools.tidyverts.org/reference/features.html'>features</a></span><span class='op'>(</span><span class='va'>Trips</span>, <span class='va'>feat_stl</span><span class='op'>)</span></span>
<span><span class='va'>p_br</span> <span class='op'>&lt;-</span> <span class='va'>tourism_feat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>trend_strength</span>, y <span class='op'>=</span> <span class='va'>seasonal_strength_year</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>group <span class='op'>=</span> <span class='va'>Region</span><span class='op'>)</span>, alpha <span class='op'>=</span> <span class='fl'>.8</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>There is one final step, to compose the three plots into an ensemble of coordinated views for exploration, shown in Figure <a href="#fig:tourism-linking-fig">2</a>. (This is the interactive realization of Figure <a href="#fig:highlight-retail">1</a>). <!-- Routine functions bring about new interaction with temporal data on the client side.--></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://plotly-r.com'>plotly</a></span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/plotly/man/subplot.html'>subplot</a></span><span class='op'>(</span><span class='va'>p_l</span>,</span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/plotly/man/subplot.html'>subplot</a></span><span class='op'>(</span></span>
<span>    <span class='fu'><a href='https://rdrr.io/pkg/plotly/man/ggplotly.html'>ggplotly</a></span><span class='op'>(</span><span class='va'>p_tr</span>, tooltip <span class='op'>=</span> <span class='st'>"Region"</span>, width <span class='op'>=</span> <span class='fl'>1100</span><span class='op'>)</span>,</span>
<span>    <span class='fu'><a href='https://rdrr.io/pkg/plotly/man/ggplotly.html'>ggplotly</a></span><span class='op'>(</span><span class='va'>p_br</span>, tooltip <span class='op'>=</span> <span class='st'>"Region"</span>, width <span class='op'>=</span> <span class='fl'>1100</span><span class='op'>)</span>,</span>
<span>    nrows <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,</span>
<span>  widths <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.4</span>, <span class='fl'>.6</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/plotly/man/highlight.html'>highlight</a></span><span class='op'>(</span>dynamic <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Since all plots are created from one shared tsibble data source, they are self-linking views. Nodes, lines, and points are hoverable and clickable. Given the <code>spec</code>, clicking either one element in any plot highlights all points that match the <code>Region</code> category, that is, categorical linking. Figure <a href="#fig:tourism-linking-fig">2</a> is a static view of an interactive exploration. The steps in getting to this point were:</p>
<ol type="1">
<li>A branch of the tree corresponding to Western Australia was first selected. (The names of the regions are a little odd, which is a quirk of the data set, but all four areas, Australia’s South West, …., correspond to tourist destinations in Western Australia. Hovering over the node on the branch brings up the state name.) This generated the response in the line plots and the scatterplot that colored corresponding time series and points as blue.</li>
<li>To enable persistent selection, in oder to compare regions or states, “Shift” and click on the tree was done, after switching the color to red. This generated the response that points and time series corresponding to Sydney were highlighted in red.</li>
<li>Hovering over the points brings up the label for Sydney.</li>
</ol>
<p>Domestic tourism sees Sydney as one of the most popular destinations in the realm of business and friends visiting over the years. Despite the relatively weaker performance in Western Australia, Australia’s North West region sees a strongest upward trend in business, bypassing Sydney in some years.</p>
<p>In summary, shared tsibble data nicely bridges between the <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a> and <strong>tidyverts</strong> ecosystems for temporal data using the common “key”. The <code>as_shared_tsibble()</code> provides a symbolic user interface for the effortless construction of a hybrid of hierarchical and categorical linking between plots. The <code>plotly_key_tree()</code> function, in turn, decodes the hierarchical specification to plot a tree for data overview and navigation, when accompanied by more detailed plots.</p>
<h2 id="slicing-and-dicing-time">Slicing and dicing time</h2>
<p>An important aspect of temporal data is the time context. Time has a cyclical structure, that may correspond to seasonal patterns to be discovered. The <code>index</code> component of the (shared) tsibble data forms the basis for exploring seasonality. To investigate for periodic or aperiodic patterns, series should be wrapped on themselves, where the index is broken into temporal components like quarter or day. We shall explore this with pedestrian traffic in Melbourne, Australia.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:wrap-ped"></span>
<img src="img/wrap-0.png" alt="Snapshots wrapping after slicing the \code{pedestrian20} data at different intervals, (a) none, (b) daily and (c) weekly. This type of interaction is made possible with Shiny elements." width="100%" /><img src="img/wrap-1.png" alt="Snapshots wrapping after slicing the \code{pedestrian20} data at different intervals, (a) none, (b) daily and (c) weekly. This type of interaction is made possible with Shiny elements." width="100%" /><img src="img/wrap-7.png" alt="Snapshots wrapping after slicing the \code{pedestrian20} data at different intervals, (a) none, (b) daily and (c) weekly. This type of interaction is made possible with Shiny elements." width="100%" />
<p class="caption">
Figure 3: Snapshots wrapping after slicing the data at different intervals, (a) none, (b) daily and (c) weekly. This type of interaction is made possible with Shiny elements.
</p>
</div>
</div>
<p>The city of Melbourne has sensors installed at various locations, to record hourly counts of pedestrians, in order to capture the daily rhythms of the downtown <span class="citation" data-cites="ped">(<a href="#ref-ped" role="doc-biblioref">City of Melbourne 2020</a>)</span>. Figure <a href="#fig:wrap-ped">3</a> shows the first five months of 2020 foot traffic at four different locations, for three different time slices, daily, weekly and full five months. Plot <a href="#fig:wrap-ped-1"><strong>??</strong></a> shows hourly counts from January to May on an absolute timeline, facetted by locations. The stage 3 COVID-19 lockdown, on March 16, is marked by a change of color. (The pre-lockdown period is colored with dark green and lockdown with orange.) We can see a significant decline in foot traffic at all four locations. QV Market is less affected probably because this is a major produce market, an essential service that continued to operate. Bourke St, a major shopping center, sees a gradual uptick in the last weeks of the period indicating that people were getting back into the shops.</p>
<p>Figure <a href="#fig:wrap-ped-2"><strong>??</strong></a> and <a href="#fig:wrap-ped-3"><strong>??</strong></a> show the slicing and wrapping of the series into daily and weekly sections, respectively. Multiple seasonalities pop out. There tends to be a daily pattern, especially visible at the main train station, Southern Cross Station. There is also a weekday vs weekend pattern, also most visible at Southern Cross Station. These seasonal patterns are still present during the lockdown, but the magnitude is greatly reduced. Numbers are also down at the produce market and the shopping center. Birrarung Marr is the most affected. This is the location of special events, and it is clear that these have completely disappeared during the lockdown.</p>
<p>The wrapping procedure involves slicing the time index into seasonal periods of interest, and the result is diced time. For example, hourly pedestrian data can be decomposed into 24-hour blocks, which then overlays the counts for all respective days, as done in plot <a href="#fig:wrap-ped-2"><strong>??</strong></a>. For exploration, this slice position should be controlled interactively, so that many different slices can be examined rapidly. This can be achieved using shiny, with the functions provided in the <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a>.</p>
<p>This shiny module, decoupled to <code>tsibbleWrapUI()</code> and <code>tsibbleWrapServer()</code>, presents a clean interface and forms a reusable component that could be embedded in any shiny application. In general, a shiny module provides a vehicle for modularising shiny applications, relevant for both users and developers. As with all shiny modules, the first argument in both functions in <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> requires a user-supplied id string that must be unique. The UI function <code>tsibbleWrapUI()</code> simply shows a slider that animates or controls the number of periods to be diced. The workhorse is the server function <code>tsibbleWrapServer()</code>, encapsulating the algorithm that transforms data and sends messages to update the plot accordingly. The <code>plot</code> argument expects a <code>ggplot</code> or <code>plotly</code> object, where one can plot data using either lines or other graphical elements (such as boxplots). As the function name suggests, a (shared) tsibble is needed to start the engine, so that the time <code>index</code> can be retrieved for dissection. The <code>period</code> option semantically takes a desired number of seasonal periods to be shifted, for example data shifted by “1 day”, “2 days”, or “1 week”, etc. In other words, the <code>period</code> defines the grind level. For date-times (represented by <code>POSIXt</code>), the granularity ranges from fine “day” to a much coarser “year”. The following code snippet generates Figure <a href="#fig:wrap-ped">3</a>. The creation of the <code>pedestrian20</code> data is available in supplementary R files.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://shiny.rstudio.com/'>shiny</a></span><span class='op'>)</span></span>
<span><span class='va'>p_line</span> <span class='op'>&lt;-</span> <span class='va'>pedestrian20</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Date_Time</span>, y <span class='op'>=</span> <span class='va'>Count</span>, colour <span class='op'>=</span> <span class='va'>Lockdown</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>.3</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_wrap.html'>facet_wrap</a></span><span class='op'>(</span><span class='op'>~</span> <span class='va'>Sensor</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Date Time"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_brewer.html'>scale_colour_brewer</a></span><span class='op'>(</span>palette <span class='op'>=</span> <span class='st'>"Dark2"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/shiny/man/fluidPage.html'>fluidPage</a></span><span class='op'>(</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/tsibbletalk/man/tsibble-wrap.html'>tsibbleWrapUI</a></span><span class='op'>(</span><span class='st'>"dice"</span><span class='op'>)</span></span>
<span><span class='op'>)</span></span>
<span><span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span>, <span class='va'>session</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/pkg/tsibbletalk/man/tsibble-wrap.html'>tsibbleWrapServer</a></span><span class='op'>(</span><span class='st'>"dice"</span>, <span class='fu'><a href='https://rdrr.io/pkg/plotly/man/ggplotly.html'>ggplotly</a></span><span class='op'>(</span><span class='va'>p_line</span>, height <span class='op'>=</span> <span class='fl'>700</span><span class='op'>)</span>, period <span class='op'>=</span> <span class='st'>"1 day"</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/shinyApp.html'>shinyApp</a></span><span class='op'>(</span><span class='va'>ui</span>, <span class='va'>server</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>Figure <a href="#fig:wrap-ped-1"><strong>??</strong></a> corresponds to the initial state, with the slider incremented by 1-day units. The “play” button near the end of the slider can automatically animate the slicing and dicing process, walking the viewer through all 24 hours of the 152 days. Alternatively, users can drag the slider to examine selected slices.</p>
<p>In response to the slider input, the plot will be updated and loaded with newly transformed data. At its core, keeping the application as performant as possible is the top priority. Without completely redrawing the plot, the <code>plotlyProxy()</code> react method is invoked internally for talking to shiny. The underlying tsibble data is being called back and processed in R. Only transformed data gets fed back to the shiny server, for updating with resetting the x-axis ranges and breaks. The other plot configurations, such as marks, y-axes, and layouts, are cached and used as is.</p>
<p>The new shiny module exploits the temporal aspect for a tsibble object, available through the <code>index</code> attribute. It allows users to slide through relative periods to digest seasonal behaviors, with a nimble user experience.</p>
<h1 id="summary">Summary</h1>
<p>At the heart of the <a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a> package is a blending of the best bits from <a href="https://cran.r-project.org/package=tsibble">tsibble</a>, <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a>, <a href="https://cran.r-project.org/package=plotly">plotly</a>, and <a href="https://cran.r-project.org/package=shiny">shiny</a>.</p>
<p>The <code>as_shared_tsibble()</code> turns a <code>tsibble</code> object to a shared data class, with an option to express any nesting and crossing structures from the <code>key</code> attribute. If nesting is found in the data, the <code>plotly_key_tree()</code> creates an interactive hierarchical tree to help with the data overview. This sets the stage for hierarchical and categorical linking between multiple views from one shared tsibble.</p>
<p>A new shiny module, <code>tsibbleWrapUI()</code> and <code>tsibbleWrapServer()</code>, provides a lens for looking at temporal aspects of a <code>tsibble</code>, in particular seasonal or cyclical variations. The slicing and dicing technique efficiently wrap time lines for user-defined plots. The <code>plotlyProxy()</code> react method makes it possible to send wrapped data to the server and amend the plot straight way.</p>
<h1 id="references">References</h1>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<h2 class="appendix" id="supplementary-materials">Supplementary materials</h2>
<p>Supplementary materials are available in addition to this article. It can be downloaded at
<a href="RJ-2021-050.zip">RJ-2021-050.zip</a></p>
<h2 class="appendix" id="cran-packages-used">CRAN packages used</h2>
<p><a href="https://cran.r-project.org/package=tsibbletalk">tsibbletalk</a>, <a href="https://cran.r-project.org/package=tsibble">tsibble</a>, <a href="https://cran.r-project.org/package=tsibbledata">tsibbledata</a>, <a href="https://cran.r-project.org/package=tidyverse">tidyverse</a>, <a href="https://cran.r-project.org/package=feasts">feasts</a>, <a href="https://cran.r-project.org/package=fable">fable</a>, <a href="https://cran.r-project.org/package=shiny">shiny</a>, <a href="https://cran.r-project.org/package=htmlwidgets">htmlwidgets</a>, <a href="https://cran.r-project.org/package=plotly">plotly</a>, <a href="https://cran.r-project.org/package=rbokeh">rbokeh</a>, <a href="https://cran.r-project.org/package=leaflet">leaflet</a>, <a href="https://cran.r-project.org/package=crosstalk">crosstalk</a>, <a href="https://cran.r-project.org/package=grDevices">grDevices</a>, <a href="https://cran.r-project.org/package=loon">loon</a>, <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a></p>
<h2 class="appendix" id="cran-task-views-implied-by-cited-packages">CRAN Task Views implied by cited packages</h2>
<p><a href="https://cran.r-project.org/view=MissingData">MissingData</a>, <a href="https://cran.r-project.org/view=Spatial">Spatial</a>, <a href="https://cran.r-project.org/view=TeachingStatistics">TeachingStatistics</a>, <a href="https://cran.r-project.org/view=TimeSeries">TimeSeries</a>, <a href="https://cran.r-project.org/view=WebTechnologies">WebTechnologies</a></p>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-R-shiny" class="csl-entry" role="doc-biblioentry">
W. Chang, J. Cheng, J. Allaire, Y. Xie and J. McPherson. <em>Shiny: Web application framework for r.</em> 2020. URL <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>. R package version 1.5.0.
</div>
<div id="ref-R-crosstalk" class="csl-entry" role="doc-biblioentry">
J. Cheng. <em>Crosstalk: Inter-widget interactivity for HTML widgets.</em> 2020. URL <a href="https://CRAN.R-project.org/package=crosstalk">https://CRAN.R-project.org/package=crosstalk</a>. R package version 1.1.0.1.
</div>
<div id="ref-R-leaflet" class="csl-entry" role="doc-biblioentry">
J. Cheng, B. Karambelkar and Y. Xie. <em>Leaflet: Create interactive web maps with the JavaScript ’leaflet’ library.</em> 2019. URL <a href="https://CRAN.R-project.org/package=leaflet">https://CRAN.R-project.org/package=leaflet</a>. R package version 2.0.3.
</div>
<div id="ref-cheng_enabling_2016" class="csl-entry" role="doc-biblioentry">
X. Cheng, D. Cook and H. Hofmann. Enabling interactivity on displays of multivariate time series and longitudinal data. <em>Journal of Computational and Graphical Statistics</em>, 25(4): 1057–1076, 2016. URL <a href="https://www.tandfonline.com/doi/full/10.1080/10618600.2015.1105749">https://www.tandfonline.com/doi/full/10.1080/10618600.2015.1105749</a>.
</div>
<div id="ref-ped" class="csl-entry" role="doc-biblioentry">
City of Melbourne. <em>Pedestrian volume in melbourne.</em> City of Melbourne, Australia, 2020. URL <a href="http://www.pedestrian.melbourne.vic.gov.au">http://www.pedestrian.melbourne.vic.gov.au</a>.
</div>
<div id="ref-R-rbokeh" class="csl-entry" role="doc-biblioentry">
R. Hafen and Continuum Analytics, Inc. <em>Rbokeh: R interface for bokeh.</em> 2020. URL <a href="https://CRAN.R-project.org/package=rbokeh">https://CRAN.R-project.org/package=rbokeh</a>. R package version 0.5.1.
</div>
<div id="ref-fpp" class="csl-entry" role="doc-biblioentry">
R. J. Hyndman and G. Athanasopoulos. <em>Forecasting: Principles and practice.</em> Melbourne, Australia: OTexts, 2017. URL <a href="https://OTexts.org/fpp2">OTexts.org/fpp2</a>.
</div>
<div id="ref-R-fable" class="csl-entry" role="doc-biblioentry">
M. O’Hara-Wild, R. Hyndman and E. Wang. <em>Fable: Forecasting models for tidy time series.</em> 2020a. URL <a href="https://CRAN.R-project.org/package=fable">https://CRAN.R-project.org/package=fable</a>. R package version 0.2.1.
</div>
<div id="ref-R-feasts" class="csl-entry" role="doc-biblioentry">
M. O’Hara-Wild, R. Hyndman and E. Wang. <em>Feasts: Feature extraction and statistics for time series.</em> 2020b. URL <a href="https://CRAN.R-project.org/package=feasts">https://CRAN.R-project.org/package=feasts</a>. R package version 0.1.5.
</div>
<div id="ref-R-tsibbledata" class="csl-entry" role="doc-biblioentry">
M. O’Hara-Wild, R. Hyndman and E. Wang. <em>Tsibbledata: Diverse datasets for ’tsibble’.</em> 2020c. URL <a href="https://CRAN.R-project.org/package=tsibbledata">https://CRAN.R-project.org/package=tsibbledata</a>. R package version 0.2.0.
</div>
<div id="ref-plotly2020" class="csl-entry" role="doc-biblioentry">
C. Sievert. <em>Interactive web-based data visualization with r, plotly, and shiny.</em> Chapman; Hall/CRC, 2020. URL <a href="https://plotly-r.com">https://plotly-r.com</a>.
</div>
<div id="ref-tourism" class="csl-entry" role="doc-biblioentry">
Tourism Research Australia. <em>Australian domestic overnight trips.</em> Tourism Research Australia, Australia, 2020. URL <a href="https://www.tra.gov.au">https://www.tra.gov.au</a>.
</div>
<div id="ref-unwin_ensemble_2018" class="csl-entry" role="doc-biblioentry">
A. Unwin and P. Valero-Mora. Ensemble <span>Graphics</span>. <em>Journal of Computational and Graphical Statistics</em>, 27(1): 157–165, 2018. URL <a href="https://www.tandfonline.com/doi/full/10.1080/10618600.2017.1383264">https://www.tandfonline.com/doi/full/10.1080/10618600.2017.1383264</a> [online; last accessed April 23, 2019].
</div>
<div id="ref-R-htmlwidgets" class="csl-entry" role="doc-biblioentry">
R. Vaidyanathan, Y. Xie, J. Allaire, J. Cheng and K. Russell. <em>Htmlwidgets: HTML widgets for r.</em> 2019. URL <a href="https://CRAN.R-project.org/package=htmlwidgets">https://CRAN.R-project.org/package=htmlwidgets</a>. R package version 1.5.1.
</div>
<div id="ref-R-loon" class="csl-entry" role="doc-biblioentry">
A. Waddell and R. W. Oldford. <em>Loon: Interactive statistical data visualization.</em> 2020. URL <a href="https://CRAN.R-project.org/package=loon">https://CRAN.R-project.org/package=loon</a>. R package version 1.3.1.
</div>
<div id="ref-wang2020tsibble" class="csl-entry" role="doc-biblioentry">
E. Wang, D. Cook and R. J. Hyndman. A new tidy data structure to support exploration and modeling of temporal data. <em>Journal of Computational and Graphical Statistics</em>, 29(3): 466–478, 2020. DOI <a href="https://doi.org/10.1080/10618600.2019.1695624">10.1080/10618600.2019.1695624</a>.
</div>
<div id="ref-wickham2014tidy" class="csl-entry" role="doc-biblioentry">
H. Wickham. Tidy data. <em>Journal of Statistical Software</em>, 59(10): 1–23, 2014.
</div>
<div id="ref-Wickham2019" class="csl-entry" role="doc-biblioentry">
H. Wickham, M. Averick, J. Bryan, W. Chang, L. D. McGowan, R. François, G. Grolemund, A. Hayes, L. Henry, J. Hester, et al. Welcome to the tidyverse. <em>Journal of Open Source Software</em>, 4(43): 1686, 2019. URL <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-Wilkinson1973" class="csl-entry" role="doc-biblioentry">
G. N. Wilkinson and C. E. Rogers. Symbolic description of factorial models for analysis of variance. <em>Journal of the Royal Statistical Society. Series C (Applied Statistics)</em>, 22(3): 392–399, 1973. URL <a href="http://www.jstor.org/stable/2346786">http://www.jstor.org/stable/2346786</a>.
</div>
<div id="ref-xie_reactive_2014" class="csl-entry" role="doc-biblioentry">
Y. Xie, H. Hofmann and X. Cheng. Reactive programming for interactive graphics. <em>Statistical Science</em>, 29(2): 201–213, 2014. URL <a href="http://projecteuclid.org/euclid.ss/1408368571">http://projecteuclid.org/euclid.ss/1408368571</a>.
</div>
</div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Wang &amp; Cook, "The R Journal: Conversations in Time: Interactive Visualization to Explore Structured Temporal Data", The R Journal, 2021</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@article{RJ-2021-050,
  author = {Wang, Earo and Cook, Dianne},
  title = {The R Journal: Conversations in Time: Interactive Visualization to Explore Structured Temporal Data},
  journal = {The R Journal},
  year = {2021},
  note = {https://doi.org/10.32614/RJ-2021-050},
  doi = {10.32614/RJ-2021-050},
  volume = {13},
  issue = {1},
  issn = {2073-4859},
  pages = {461-469}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!--radix_placeholder_navigation_after_body--><html><body>
<div class="distill-site-nav distill-site-footer">
<p>© The R Foundation, <a href="mailto:r-journal@r-project.org">web page
contact</a>.</p>
</div>
<!--/radix_placeholder_navigation_after_body-->
</body></html>


</body>

</html>
